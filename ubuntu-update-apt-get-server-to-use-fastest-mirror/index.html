<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>    Ubuntu - Update APT-GET Server to Use Fastest Mirror
 | I think ...</title>
<meta content="Khaled Monsoor" name="author"/>
<meta content="Pelican v4.7.1" name="generator"/>
<link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css" integrity="sha512-P5MgMn1jBN01asBgU0z60Qk4QxiXo86+wlFahKrsQf37c9cro517WzVSPPV1tDKzhku2iJ2FVgL67wG03SGnNA==" rel="stylesheet"/>
<link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" rel="stylesheet"/>
<link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css" integrity="sha512-+EoPw+Fiwh6eSeRK7zwIKG2MA8i3rV/DGa3tdttQGgWyatG/SkncT53KHQaS5Jh9MNOT3dmFL0FjTY08And/Cw==" rel="stylesheet"/>
<link href="https://blog.kmonsoor.com/theme/css/main.min.css?e802d679" rel="stylesheet"/>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-B3VL9K9558"></script>
<script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-B3VL9K9558');
    </script>
<script crossorigin="anonymous" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha512-wV7Yj1alIZDqZFCUQJy85VN+qvEIly93fIQAN7iqDFCPEucLCeNFz4r35FCo9s6WrpdDQPi80xbljXB8Bjtvcg==" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/js/bootstrap.bundle.min.js"></script>
<script crossorigin="anonymous" integrity="sha512-IsNh5E3eYy3tr/JiX2Yx4vsCujtkhwl7SLqgnwLNgf04Hrt9BT9SXlLlZlWx+OK4ndzAoALhsMNcCmkggjZB1w==" src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script>
<script crossorigin="anonymous" integrity="sha512-/2sZKAsHDmHNoevKR/xsUKe+Bpf692q4tHNQs9VWWz0ujJ9JBM67iFYbIEdfDV9I2BaodgT5MIg/FTUmUv3oyQ==" src="https://cdnjs.cloudflare.com/ajax/libs/fitvids/1.2.0/jquery.fitvids.min.js"></script>
<script src="https://blog.kmonsoor.com/theme/js/main.min.js?86e1c044"></script>
<link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/>
<link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/>
<link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/>
<link href="/site.webmanifest" rel="manifest"/>
<link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon"/>
<meta content="#ffc40d" name="msapplication-TileColor"/>
<meta content="#ffffff" name="theme-color"/>
<!-- Feeds -->
<link href="https://blog.kmonsoor.com/feed/atom/index.html" rel="alternate" title="I think ... - Latest posts - Atom Feed" type="application/atom+xml"/>
<link href="https://blog.kmonsoor.com/feed/index.html" rel="alternate" title="I think ... - Latest posts - RSS Feed" type="application/rss+xml"/>
<link href="https://blog.kmonsoor.com/category/tech/feed/atom/index.html" rel="alternate" title="I think ... - Category: Tech - Atom Feed" type="application/atom+xml"/>
<link href="https://blog.kmonsoor.com/category/tech/feed/index.html" rel="alternate" title="I think ... - Category: Tech - RSS Feed" type="application/rss+xml"/>
<meta content="ubuntu, mirror, apt-get, update, upgrade, fastest, server, apt-select" name="keywords"/>
<link href="https://blog.kmonsoor.com/ubuntu-update-apt-get-server-to-use-fastest-mirror/" rel="canonical"/><script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "I think ...", "item": "https://blog.kmonsoor.com"}, {"@type": "ListItem", "position": 2, "name": "Ubuntu update apt get server to use fastest mirror", "item": "https://blog.kmonsoor.com/ubuntu-update-apt-get-server-to-use-fastest-mirror"}, {"@type": "ListItem", "position": 3, "name": "Index", "item": "https://blog.kmonsoor.com/ubuntu-update-apt-get-server-to-use-fastest-mirror/index.html"}]}</script><script type="application/ld+json">{"@context": "https://schema.org", "@type": "Article", "author": {"@type": "Person", "name": "Khaled Monsoor"}, "publisher": {"@type": "Organization", "name": "I think ..."}, "headline": "Ubuntu - Update <span class=\"caps\">APT</span>-<span class=\"caps\">GET</span> Server to Use Fastest&nbsp;Mirror", "about": "Tech", "datePublished": "2016-10-10 00:00"}</script></head>
<body class="bg-transparent pt-4">
<div class="container">
<a class="avatar-container float-left mx-4" href="https://blog.kmonsoor.com">
<div class="avatar animate">
<div class="side"><img class="img-fluid" src="/logo.png"/></div>
<div class="side back text-center pt-2 px-1 small">
                                comes with a beard
                            </div>
</div>
</a>
<h1>
<a class="text-dark text-decoration-none" href="https://blog.kmonsoor.com">I think ...</a>
<small class="text-secondary"><small></small></small>
</h1>
<nav class="navbar d-block navbar-expand-lg navbar-light bg-light shadow rounded-lg">
<a class="navbar-brand d-none" href="https://blog.kmonsoor.com" title="">I think ...</a>
<button aria-controls="plumage-navbar-collapse-1" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#plumage-navbar-collapse-1" data-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="plumage-navbar-collapse-1">
<ul class="navbar-nav mr-auto mt-2 mt-lg-0">
<li class="nav-item">
<a class="nav-link" href="/">
                                    Home
                                </a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://blog.kmonsoor.com/about/">
                                        About Me
                                    </a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://blog.kmonsoor.com/category/analysis/">
                                        Analysis
                                    </a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://blog.kmonsoor.com/category/language/">
                                        Language
                                    </a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://blog.kmonsoor.com/category/others/">
                                        Others
                                    </a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://blog.kmonsoor.com/category/tech/">
                                        Tech
<span class="sr-only">(current)</span> </a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://blog.kmonsoor.com/category/thoughts/">
                                        Thoughts
                                    </a>
</li>
</ul>
</div>
</nav>
</div>
<div class="container mt-5">
<div class="row">
<div class="col-md-9">
<h1>
<a href="https://blog.kmonsoor.com/ubuntu-update-apt-get-server-to-use-fastest-mirror/" rel="bookmark" title="Permalink to Ubuntu - Update APT-GET Server to Use Fastest Mirror">Ubuntu - Update <span class="caps">APT</span>-<span class="caps">GET</span> Server to Use Fastest Mirror</a>
</h1>
</div>
</div>
<div class="row">
<div class="col-md-9" id="content" role="main">
<h2 id="prelude">Prelude<a class="headerlink text-decoration-none small pl-2" href="#prelude" title="Permanent link">¶</a></h2>
<p>By default, Ubuntu sets the update server pointing to its own (<a href="http://archive.ubuntu.com">http://archive.ubuntu.com</a>). It is the safest bet for Ubuntu. But, that’s not the case for users, especially who are outside <span class="caps">USA</span>. To make it smoother as well as distribute the load, Ubuntu also provides a list of mirror sites. You can find the official mirror list <a href="https://launchpad.net/ubuntu/+archivemirrors">here</a>. </p>
<p>However, it needs some configuration.</p>
<h2 id="on-gui">On <span class="caps">GUI</span><a class="headerlink text-decoration-none small pl-2" href="#on-gui" title="Permanent link">¶</a></h2>
<p>Yes, you can do the selection on Ubuntu using its <span class="caps">GUI</span> tool. But, the problem is it don’t always work as you want.</p>
<blockquote class="blockquote border-left border-primary pl-3">
<p>It works on geolocation, giving me the local server, which is waaaayy slower where I am. The network temporal distance is the important factor here, not spatial distance (<a href="http://askubuntu.com/a/9035/113604">http://askubuntu.com/a/9035/113604</a>)</p>
</blockquote>
<p><img alt="Ubuntu-select-update-server-GUI" class="img-fluid border rounded shadow" src="http://i.imgur.com/sCWr0zrl.png"/></p>
<h2 id="so-what-else-do-we-have">so, what else do we have ?<a class="headerlink text-decoration-none small pl-2" href="#so-what-else-do-we-have" title="Permanent link">¶</a></h2>
<p>I use a handy tool for this purpose to point me to the fastest server <span class="caps">FOR</span> <span class="caps">ME</span>. It’s <a href="https://github.com/jblakeman/apt-select">apt-select</a>.</p>
<p>To install it, i found this method most hassle-free. You may also try <code>pip install</code> method described on the repo’s <span class="caps">README</span> file.</p>
<div class="highlight pygments-style-monokai rounded shadow-sm mb-3"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="gp">$ </span>git clone https://github.com/jblakeman/apt-select.git
</code></pre></div>
<p>That’s it. Now to execute it, just run the “main” Python file.</p>
<div class="highlight pygments-style-monokai rounded shadow-sm mb-3"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="gp">$ </span><span class="nb">cd</span> apt-select
<span class="hll"><span class="linenos" data-linenos="2 "></span><span class="gp">$ </span>./apt-select.py -c -t <span class="m">3</span> -m one-week-behind
</span></code></pre></div>
<p>We are choosing here the best 3 mirrors(due to <code>-t 3</code>) which are at most <code>one week behind</code> from the main Ubuntu server. For general purposes, that’s good enough.</p>
<p>It will choose one using the latency <span class="amp">&amp;</span> ping time, and also show servers’ bandwidth. Then the tool asks you to select new mirror from the <code>3</code> options came up. Usually, stick to the top option, hence <code>1</code>. 
For example in my case, it shows:</p>
<div class="highlight pygments-style-monokai rounded shadow-sm mb-3"><pre><span></span><code><span class="hll"><span class="linenos" data-linenos=" 1 "></span><span class="gp">[khaled:~] $ </span>apt-select -c -t <span class="m">3</span> -m one-week-behind
</span><span class="linenos" data-linenos=" 2 "></span><span class="go">Getting list of mirrors...done.</span>
<span class="linenos" data-linenos=" 3 "></span><span class="go">Testing latency to mirror(s)</span>
<span class="linenos" data-linenos=" 4 "></span><span class="go">[3/3] 100%</span>
<span class="linenos" data-linenos=" 5 "></span><span class="go">Getting list of launchpad URLs...done.</span>
<span class="linenos" data-linenos=" 6 "></span><span class="go">Looking up 3 status(es)</span>
<span class="linenos" data-linenos=" 7 "></span><span class="go">[3/3] 100%</span>
<span class="linenos" data-linenos=" 8 "></span><span class="go">1. mirror.dhakacom.com (current)</span>
<span class="linenos" data-linenos=" 9 "></span><span class="go">    Latency: 1.89 ms</span>
<span class="linenos" data-linenos="10 "></span><span class="go">    Org:     dhakaCom Limited</span>
<span class="linenos" data-linenos="11 "></span><span class="go">    Status:  Up to date</span>
<span class="linenos" data-linenos="12 "></span><span class="go">    Speed:   1 Gbps</span>
<span class="linenos" data-linenos="13 "></span><span class="go">2. mirror.dhakacom.com</span>
<span class="linenos" data-linenos="14 "></span><span class="go">    Latency: 1.96 ms</span>
<span class="linenos" data-linenos="15 "></span><span class="go">    Org:     dhakaCom Limited</span>
<span class="linenos" data-linenos="16 "></span><span class="go">    Status:  Up to date</span>
<span class="linenos" data-linenos="17 "></span><span class="go">    Speed:   1 Gbps</span>
<span class="linenos" data-linenos="18 "></span><span class="go">3. archive.ubuntu.com</span>
<span class="linenos" data-linenos="19 "></span><span class="go">    Latency: 205.23 ms</span>
<span class="linenos" data-linenos="20 "></span><span class="go">    Org:     Canonical Ltd.</span>
<span class="linenos" data-linenos="21 "></span><span class="go">    Status:  Up to date</span>
<span class="linenos" data-linenos="22 "></span><span class="go">    Speed:   100 Mbps</span>
<span class="linenos" data-linenos="23 "></span><span class="go">Choose a mirror (1 - 3)</span>
<span class="linenos" data-linenos="24 "></span><span class="go">'q' to quit 1</span>
<span class="linenos" data-linenos="25 "></span><span class="go">New config file saved to /home/khaled/sources.list</span>
</code></pre></div>
<p>Then, the tool prepares a new <code>sources.list</code> file to replace the system’s one with.</p>
<p>Now, replace the file with the new one which will be now used by the <code>apt-get *</code> commands. As it overwrites a system config file, you need to do with <code>sudo</code>.</p>
<div class="highlight pygments-style-monokai rounded shadow-sm mb-3"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="gp">$ </span>sudo mv /etc/apt/sources.list /etc/apt/sources.list.backup <span class="o">&amp;&amp;</span> sudo mv sources.list /etc/apt/
</code></pre></div>
<p>That’s it. Now, all you update/upgrade will be fetched from the newly selected mirror.</p>
<p>However, I highly recommend to run <code>update</code> once right away.</p>
<div class="highlight pygments-style-monokai rounded shadow-sm mb-3"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="gp">$ </span>sudo apt-get update
</code></pre></div>
<p>Then, only if you want, run <code>upgrade</code>:</p>
<div class="highlight pygments-style-monokai rounded shadow-sm mb-3"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="gp">$ </span>sudo apt-get upgrade
</code></pre></div>
<hr/>
<h2 id="you-may-also-like">You may also like<a class="headerlink text-decoration-none small pl-2" href="#you-may-also-like" title="Permanent link">¶</a></h2>
<ul>
<li><a href="https://blog.kmonsoor.com/open-source-as-if-you-gonna-die-tonight/?utm_source=related_footer&amp;utm_keyword=coding">Open Source as-if You Gonna Die Tonight</a></li>
<li><a href="https://blog.kmonsoor.com/pelican-how-to-make-seo-friendly/?utm_source=related_footer&amp;utm_keyword=python">Pelican Static sites - <span class="caps">SEO</span> Optimization</a></li>
<li><a href="https://blog.kmonsoor.com/generate-er-diagram-from-sql-database/?utm_source=related_footer&amp;utm_keyword=coding">Generate <span class="caps">ER</span> diagram from a <span class="caps">SQL</span>-based database</a></li>
</ul>
<div class="commentbox"></div>
<script src="https://unpkg.com/commentbox.io/dist/commentBox.min.js"></script>
<script>commentBox('5722781509484544-proj')</script>
</div>
<div class="col-md-3">
<div class="card bg-light text-dark">
<ul class="list-group list-group-flush">
<li class="list-group-item">
<abbr title="2016-10-10T00:00:00+06:00"><i class="fas fa-calendar"></i> 2016-10-10</abbr>
</li>
<li class="list-group-item">
<a class="badge badge-info" data-toggle="tooltip" href="https://blog.kmonsoor.com/category/tech/" rel="tag" title="25 articles in this category">Tech</a>
<a class="badge badge-secondary" data-toggle="tooltip" href="/tag/ubuntu/" title="4 articles with this tag">Ubuntu</a>
<a class="badge badge-secondary" data-toggle="tooltip" href="/tag/server/" title="2 articles with this tag">server</a>
<a class="badge badge-secondary" data-toggle="tooltip" href="/tag/upgrade/" title="2 articles with this tag">upgrade</a>
<a class="badge badge-secondary" data-toggle="tooltip" href="/tag/apt-get/" title="1 article with this tag">apt-get</a>
<a class="badge badge-secondary" data-toggle="tooltip" href="/tag/apt-select/" title="1 article with this tag">apt-select</a>
<a class="badge badge-secondary" data-toggle="tooltip" href="/tag/fastest/" title="1 article with this tag">fastest</a>
<a class="badge badge-secondary" data-toggle="tooltip" href="/tag/mirror/" title="1 article with this tag">mirror</a>
<a class="badge badge-secondary" data-toggle="tooltip" href="/tag/update/" title="1 article with this tag">update</a>
</li>
<li class="list-group-item">
<p>Found a typo? Fix it now:</p>
<a class="btn btn-info btn-block" href="https://github.com/kmonsoor/blog.kmonsoor.com/edit/live/content/articles/ubuntu-update-apt-get-server-to-use-fastest-mirror.md"><i class="fas fa-edit fa-fw"></i> Edit article on GitHub</a>
</li>
<li class="list-group-item">
<nav class="nav nav-pills nav-fill">
<a class="nav-link btn btn-outline-primary border-0" href="https://blog.kmonsoor.com/a-near-perfect-day-of-a-muslim-Professional/" rel="prev" title="A Near-Perfect Day of a Muslim Professional">
<span aria-hidden="true">←</span> Older
                        </a>
<a class="nav-link btn btn-outline-primary border-0" href="https://blog.kmonsoor.com/pelican-how-to-make-seo-friendly/" rel="next" title="Pelican Static sites - SEO Optimization">
                            Newer <span aria-hidden="true">→</span>
</a>
</nav>
</li>
</ul>
</div>
</div>
</div>
</div>
<footer class="container-fluid mt-5 p-4 small">
<div class="row mx-5">
<div class="col-md-2">
<h6>Social</h6>
<ul class="list-unstyled">
<li><a href="https://twitter.com/kmonsoor">
<i class="fab fa-twitter fa-fw"></i>
    Twitter
</a></li>
</ul>
</div>
<div class="col-md-2">
<h6>Professional</h6>
<ul class="list-unstyled">
<li><a href="https://stackoverflow.com/users/617185/kmonsoor">
<i class="fab fa-stack-overflow fa-fw"></i>
    StackOverflow
</a></li>
<li><a href="https://linkedin.com/in/kmonsoor">
<i class="fab fa-linkedin fa-fw"></i>
    LinkedIn
</a></li>
<li><a href="https://github.com/kmonsoor/">
<i class="fab fa-github fa-fw"></i>
    Github
</a></li>
</ul>
</div>
<div class="col-md-2">
<h6>Browse content by</h6>
<ul class="list-unstyled">
<li><a href="https://blog.kmonsoor.com/categories/index.html"><i class="fas fa-th fa-fw"></i> Categories</a></li>
<li><a href="https://blog.kmonsoor.com/archives/index.html"><i class="far fa-calendar-alt fa-fw"></i> Dates</a></li>
<li><a href="https://blog.kmonsoor.com/tags/index.html"><i class="fas fa-tags fa-fw"></i> Tags</a></li>
</ul>
</div>
<div class="col-md-2 text-muted">
<h6>Copyright notice</h6>
<p class="small">
                        © Copyright
                        2010-2024
                        Khaled Monsoor.
                    </p>
</div>
<div class="col-md-2 text-muted">
<h6>Disclaimer</h6>
<p class="small">
                            All opinions expressed in this site are my own personal opinions               and are not endorsed by, nor do they represent the opinions of my               previous, current and future employers or any of its affiliates,               partners or customers.
                    </p>
</div>
<div class="col-md-2">
<h6>Feeds</h6>
<ul class="list-unstyled small">
<li>
<a href="https://blog.kmonsoor.com/feed/atom/index.html">
<i class="fas fa-atom fa-fw"></i> Latest posts (Atom)
                                    </a>
</li>
<li>
<a href="https://blog.kmonsoor.com/feed/index.html">
<i class="fas fa-rss fa-fw"></i> Latest posts (RSS)
                                    </a>
</li>
<li>
<a href="https://blog.kmonsoor.com/category/tech/feed/atom/index.html">
<i class="fas fa-atom fa-fw"></i> Category: Tech (Atom)
                                    </a>
</li>
<li>
<a href="https://blog.kmonsoor.com/category/tech/feed/index.html">
<i class="fas fa-rss fa-fw"></i> Category: Tech (RSS)
                                    </a>
</li>
</ul>
</div>
</div>
<div class="row mt-3">
<div class="offset-3 col-6 small text-muted text-center">
                    Site generated by <a class="text-dark" href="https://getpelican.com">Pelican</a>.<br/>
<a class="text-dark" href="https://github.com/kdeldycke/plumage">Plumage</a>
                    theme by <a class="text-dark" href="https://kevin.deldycke.com">Kevin Deldycke</a>.
                </div>
<div class="col-3 text-right d-flex flex-column">
<a class="mt-auto" href="#"><i class="fas fa-arrow-up"></i> Back to top</a>
</div>
</div>
</footer>
</body>
</html>