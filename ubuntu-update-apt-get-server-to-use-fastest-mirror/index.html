<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="canonical" href="https://blog.kmonsoor.com/ubuntu-update-apt-get-server-to-use-fastest-mirror/"><title>Ubuntu - Update APT-GET Server to Use Fastest Mirror -- Khaled Monsoor :: Blog</title><meta name="robots" content="nofollow"><meta name="author" content="Khaled Monsoor"><link rel="image_src" href="https://blog.kmonsoor.com/favicon.ico"><meta property="og:image" content="https://blog.kmonsoor.com/favicon.ico"><meta name="description" content="Updating Ubuntu from it's default server takes too damn long. Give it a 10x boost."><meta property="og:site_name" content="Khaled Monsoor :: Blog"><meta property="og:type" content="article"><meta property="og:locale" content="en_US"><meta property="og:title" content="Ubuntu - Update APT-GET Server to Use Fastest Mirror -- Khaled Monsoor :: Blog"><meta property="og:url" content="https://blog.kmonsoor.com/ubuntu-update-apt-get-server-to-use-fastest-mirror/"><meta property="og:description" content="Updating Ubuntu from it's default server takes too damn long. Give it a 10x boost."><meta property="article:published_time" content="2016-10-10 00:00:00+06:00"><meta name="twitter:site" content="@kmonsoor"><meta name="twitter:creator" content="@kmonsoor"><meta name="twitter:image" content="https://pbs.twimg.com/profile_images/681426835092029440/ZxuFAKOY_400x400.png"><meta name="twitter:card" content="Updating Ubuntu from it's default server takes too damn long. Give it a 10x boost."><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script><script defer src="https://blog.kmonsoor.com/theme/js/application.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.min.css"><link rel="stylesheet" href="https://blog.kmonsoor.com/theme/css/all.css"><link rel="icon" href="https://blog.kmonsoor.com/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="https://blog.kmonsoor.com/favicon.ico" type="image/x-icon"><script> window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-20431143-1','auto');ga('send','pageview');</script><script async src="https://www.google-analytics.com/analytics.js"></script><link href="https://blog.kmonsoor.com/feed/atom/index.html" type="application/atom+xml" rel="alternate" title="Khaled Monsoor :: Blog - Latest posts - Atom Feed"><link href="https://blog.kmonsoor.com/feed/index.html" type="application/rss+xml" rel="alternate" title="Khaled Monsoor :: Blog - Latest posts - RSS Feed"><link href="https://blog.kmonsoor.com/category/tech/feed/atom/index.html" type="application/atom+xml" rel="alternate" title="Khaled Monsoor :: Blog - Category: Tech - Atom Feed"><link href="https://blog.kmonsoor.com/category/tech/feed/index.html" type="application/rss+xml" rel="alternate" title="Khaled Monsoor :: Blog - Category: Tech - RSS Feed"></head><body><div class="container"><div class="page-header"><a href="https://blog.kmonsoor.com" class="avatar-container pull-left"><div class="avatar "><div class="side"><img src="/logo.png" class="img-responsive"></div></div></a><h1><a href="https://blog.kmonsoor.com">Khaled Monsoor :: Blog</a><small></small></h1></div><nav class="navbar navbar-default"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#plumage-navbar-collapse-1" aria-expanded="false"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="https://blog.kmonsoor.com" title>Ubuntu - Update APT-GET Server to Use Fastest Mirror</a></div><div class="collapse navbar-collapse" id="plumage-navbar-collapse-1"><ul class="nav navbar-nav"><li><a href="/">Home</a></li><li><a href="https://blog.kmonsoor.com/about/">About Me</a></li><li><a href="https://blog.kmonsoor.com/category/language/">Language</a></li><li class="active"><a href="https://blog.kmonsoor.com/category/tech/">Tech <span class="sr-only">(current)</span></a></li><li><a href="https://blog.kmonsoor.com/category/thoughts/">Thoughts</a></li></ul></div></nav></div><div class="container main"><div class="row"><div class=" col-md-9  "><h1><a href="https://blog.kmonsoor.com/ubuntu-update-apt-get-server-to-use-fastest-mirror/" rel="bookmark" title="Permalink to Ubuntu - Update APT-GET Server to Use Fastest Mirror">Ubuntu - Update APT-GET Server to Use Fastest Mirror</a></h1></div></div><div class="row"><div class=" col-md-9 " id="content" role="main"><div><h2>Prelude</h2><p>By default, Ubuntu sets the update server pointing to its own (http://archive.ubuntu.com). It is the safest bet for Ubuntu. But, that's not the case for users, especially who are outside USA. To make it smoother as well as distribute the load, Ubuntu also provides a list of mirror sites. You can find the official mirror list <a href="https://launchpad.net/ubuntu/+archivemirrors">here</a>. </p><p>However, it needs some configuration.</p><h2>On GUI</h2><p>Yes, you can do the selection on Ubuntu using its GUI tool. But, the problem is it don't always work as you want.</p><blockquote><p>It works on geolocation, giving me the local server, which is waaaayy slower where I am. The network temporal distance is the important factor here, not spatial distance (http://askubuntu.com/a/9035/113604)</p></blockquote><p><img alt="Ubuntu-select-update-server-GUI" src="http://i.imgur.com/sCWr0zrl.png"></p><h2>so, what else do we have ?</h2><p>I use a handy tool for this purpose to point me to the fastest server FOR ME. It's <a href="https://github.com/jblakeman/apt-select">apt-select</a>.</p><p>To install it, i found this method most hassle-free. You may also try <code>pip install</code> method described on the repo's README file.</p><div class="highlight"><pre><span></span>$ git clone https://github.com/jblakeman/apt-select.git
</pre></div><p>That's it. Now to execute it, just run the "main" Python file.</p><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> apt-select
$ ./apt-select.py -c -t <span class="m">3</span> -m one-week-behind
</pre></div><p>We are choosing here the best 3 mirrors(due to <code>-t 3</code>) which are at most <code>one week behind</code> from the main Ubuntu server. For general purposes, that's good enough.</p><p>It will choose one using the latency &amp; ping time, and also show servers' bandwidth. Then the tool asks you to select new mirror from the <code>3</code> options came up. Usually, stick to the top option, hence <code>1</code>. For example in my case, it shows:</p><div class="highlight"><pre><span></span>[khaled:~] $ apt-select -c -t 3 -m one-week-behind
Getting list of mirrors...done.
Testing latency to mirror(s)
[3/3] 100%
Getting list of launchpad URLs...done.
Looking up 3 status(es)
[3/3] 100%
1. mirror.dhakacom.com (current)
    Latency: 1.89 ms
    Org:     dhakaCom Limited
    Status:  Up to date
    Speed:   1 Gbps
2. mirror.dhakacom.com
    Latency: 1.96 ms
    Org:     dhakaCom Limited
    Status:  Up to date
    Speed:   1 Gbps
3. archive.ubuntu.com
    Latency: 205.23 ms
    Org:     Canonical Ltd.
    Status:  Up to date
    Speed:   100 Mbps
Choose a mirror (1 - 3)
&#39;q&#39; to quit 1
New config file saved to /home/khaled/sources.list
</pre></div><p>Then the tool prepares a new <code>sources.list</code> file to replace the system's one with.</p><p>Now, replace the file with the new one which will be now used by the <code>apt-get *</code> commands. As it overwrites a system config file, you need to do with <code>sudo</code>.</p><div class="highlight"><pre><span></span>$ sudo mv /etc/apt/sources.list /etc/apt/sources.list.backup <span class="o">&amp;&amp;</span> sudo mv sources.list /etc/apt/
</pre></div><p>That's it. Now, all you update/upgrade will be fetched from the newly selected mirror.</p><p>However, I highly recommend to run <code>update</code> once right away.</p><div class="highlight"><pre><span></span>$ sudo apt-get update
</pre></div><p>Also, if you want, run <code>upgrade</code>:</p><div class="highlight"><pre><span></span>sudo apt-get upgrade
</pre></div><hr><h2>You may also like</h2><ul><li><a href="https://blog.kmonsoor.com/open-source-as-if-you-gonna-die-tonight/?utm_source=related_footer&utm_keyword=coding">Open Source as-if You Gonna Die Tonight</a></li><li><a href="https://blog.kmonsoor.com/pelican-how-to-make-seo-friendly/?utm_source=related_footer&utm_keyword=python">Pelican Static sites - SEO Optimization</a></li><li><a href="https://blog.kmonsoor.com/generate-er-diagram-from-sql-database/?utm_source=related_footer&utm_keyword=coding">Generate ER diagram from a SQL-based database</a></li></ul></div></div><div class="col-md-3"><div class="well"><p><abbr title="2016-10-10T00:00:00+06:00"><i class="fa fa-calendar"></i> Oct. 10, 2016</abbr></p><hr><p><a href="https://blog.kmonsoor.com/category/tech/" rel="tag" data-toggle="tooltip" class="label label-info" title="22 articles in this category">Tech</a><a href="/tag/ubuntu/" data-toggle="tooltip" class="label label-default" title="3 articles with this tag">ubuntu</a><a href="/tag/mirror/" data-toggle="tooltip" class="label label-default" title="1 article with this tag">mirror</a><a href="/tag/apt-get/" data-toggle="tooltip" class="label label-default" title="1 article with this tag">apt-get</a><a href="/tag/update/" data-toggle="tooltip" class="label label-default" title="1 article with this tag">update</a><a href="/tag/upgrade/" data-toggle="tooltip" class="label label-default" title="1 article with this tag">upgrade</a><a href="/tag/fastest/" data-toggle="tooltip" class="label label-default" title="1 article with this tag">fastest</a><a href="/tag/server/" data-toggle="tooltip" class="label label-default" title="1 article with this tag">server</a><a href="/tag/apt-select/" data-toggle="tooltip" class="label label-default" title="1 article with this tag">apt-select</a></p><hr><p>Found a typo ? Want to fix it ?</p><a class="btn btn-info btn-block" href="https://github.com/kmonsoor/blog.kmonsoor.com/edit/live/content/articles/ubuntu-update-apt-get-server-to-use-fastest-mirror.md"><i class="fa fa-random fa-white fa-fw"></i> Suggest edit on GitHub</a><hr></div></div></div></div><footer class="container"><div class="commentbox"></div></footer><footer class="container-fluid"><div class="container"><div class="row"><div class="col-md-2"><h5>Social</h5><ul class="list-unstyled"><li><a href="https://twitter.com/kmonsoor"><i class="fa fa-twitter"></i> @KhaledMonsoor </a></li><li><a href="http://instagram.com/kmonsoor/"><img src="https://icons.better-idea.org/icon?url=instagram.com&size=16" width="16" height="16" class="icon" alt="instagram.com icon"> kmonsoor </a></li></ul></div><div class="col-md-2"><h5>Professional</h5><ul class="list-unstyled"><li><a href="https://stackoverflow.com/story/kmonsoor"><i class="fa fa-stack-overflow"></i> Careers 2.0 </a></li><li><a href="https://linkedin.com/in/kmonsoor"><i class="fa fa-linkedin-square"></i> LinkedIn </a></li><li><a href="https://github.com/kmonsoor/"><i class="fa fa-github"></i> Github </a></li></ul></div><div class="col-md-2"><h5>Browse content by</h5><ul class="list-unstyled"><li><a href="https://blog.kmonsoor.com/categories/index.html"><i class="fa fa-tags"></i> Categories</a></li><li><a href="https://blog.kmonsoor.com/archives/index.html"><i class="fa fa-calendar"></i> Dates</a></li><li><a href="https://blog.kmonsoor.com/tags/index.html"><i class="fa fa-tag"></i> Tags</a></li></ul></div><div class="col-md-2"><h4><a target="_blank" href="https://paypal.me/kmonsoor/">Support Author</a></h4></div><div class="col-md-2 text-muted"><h5>Copyright notice</h5><p>© Copyright 2010-2020 Khaled Monsoor.</p></div><div class="col-md-2 text-muted"><h5>Disclaimer</h5><p>All opinions expressed in this site are my own personal opinions and are not endorsed by, nor do they represent the opinions of my previous, current and future employers or any of its affiliates, partners or customers.</p></div><div class="span2"><h5 class="pull-right"><a href="#" class="fa fa-arrow-up"> Back to top</a></h5></div></div></div><div class="container"><div class="row span12 muted text-center"> Site generated by <a href="http://getpelican.com"> Pelican</a> with modified <a href="https://github.com/kdeldycke/plumage">Plumage</a> theme. </div></div></footer><script src="https://unpkg.com/commentbox.io/dist/commentBox.min.js"></script><script defer src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/js/bootstrap.min.js"></script><script defer src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script><script defer src="https://cdnjs.cloudflare.com/ajax/libs/fitvids/1.1.0/jquery.fitvids.min.js"></script><script defer src="https://blog.kmonsoor.com/theme/js/jquery.mglass.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css"><script>
    commentBox('5722781509484544-proj');
</script></body></html>