<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>    Generate ER diagram from a SQL-based database
 | I think ...</title>
<meta content="Khaled Monsoor" name="author"/>
<meta content="Pelican v4.7.1" name="generator"/>
<link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css" integrity="sha512-P5MgMn1jBN01asBgU0z60Qk4QxiXo86+wlFahKrsQf37c9cro517WzVSPPV1tDKzhku2iJ2FVgL67wG03SGnNA==" rel="stylesheet"/>
<link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" rel="stylesheet"/>
<link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css" integrity="sha512-+EoPw+Fiwh6eSeRK7zwIKG2MA8i3rV/DGa3tdttQGgWyatG/SkncT53KHQaS5Jh9MNOT3dmFL0FjTY08And/Cw==" rel="stylesheet"/>
<link href="https://blog.kmonsoor.com/theme/css/main.min.css?e802d679" rel="stylesheet"/>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-B3VL9K9558"></script>
<script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-B3VL9K9558');
    </script>
<script crossorigin="anonymous" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script crossorigin="anonymous" integrity="sha512-wV7Yj1alIZDqZFCUQJy85VN+qvEIly93fIQAN7iqDFCPEucLCeNFz4r35FCo9s6WrpdDQPi80xbljXB8Bjtvcg==" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/js/bootstrap.bundle.min.js"></script>
<script crossorigin="anonymous" integrity="sha512-IsNh5E3eYy3tr/JiX2Yx4vsCujtkhwl7SLqgnwLNgf04Hrt9BT9SXlLlZlWx+OK4ndzAoALhsMNcCmkggjZB1w==" src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script>
<script crossorigin="anonymous" integrity="sha512-/2sZKAsHDmHNoevKR/xsUKe+Bpf692q4tHNQs9VWWz0ujJ9JBM67iFYbIEdfDV9I2BaodgT5MIg/FTUmUv3oyQ==" src="https://cdnjs.cloudflare.com/ajax/libs/fitvids/1.2.0/jquery.fitvids.min.js"></script>
<script src="https://blog.kmonsoor.com/theme/js/main.min.js?86e1c044"></script>
<link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/>
<link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/>
<link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/>
<link href="/site.webmanifest" rel="manifest"/>
<link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon"/>
<meta content="#ffc40d" name="msapplication-TileColor"/>
<meta content="#ffffff" name="theme-color"/>
<!-- Feeds -->
<link href="https://blog.kmonsoor.com/feed/atom/index.html" rel="alternate" title="I think ... - Latest posts - Atom Feed" type="application/atom+xml"/>
<link href="https://blog.kmonsoor.com/feed/index.html" rel="alternate" title="I think ... - Latest posts - RSS Feed" type="application/rss+xml"/>
<link href="https://blog.kmonsoor.com/category/tech/feed/atom/index.html" rel="alternate" title="I think ... - Category: Tech - Atom Feed" type="application/atom+xml"/>
<link href="https://blog.kmonsoor.com/category/tech/feed/index.html" rel="alternate" title="I think ... - Category: Tech - RSS Feed" type="application/rss+xml"/>
<meta content="database, sql, dbms, ER-diagram, graphviz, java, postgresql, programming, RDBMS, schema, schemaspy, visualization" name="keywords"/>
<link href="https://blog.kmonsoor.com/generate-er-diagram-from-sql-database/" rel="canonical"/><script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "I think ...", "item": "https://blog.kmonsoor.com"}, {"@type": "ListItem", "position": 2, "name": "Generate er diagram from sql database", "item": "https://blog.kmonsoor.com/generate-er-diagram-from-sql-database"}, {"@type": "ListItem", "position": 3, "name": "Index", "item": "https://blog.kmonsoor.com/generate-er-diagram-from-sql-database/index.html"}]}</script><script type="application/ld+json">{"@context": "https://schema.org", "@type": "Article", "author": {"@type": "Person", "name": "Khaled Monsoor"}, "publisher": {"@type": "Organization", "name": "I think ..."}, "headline": "Generate <span class=\"caps\">ER</span> diagram from a <span class=\"caps\">SQL</span>-based&nbsp;database", "about": "Tech", "datePublished": "2014-12-18 00:00", "image": "https://i.imgur.com/6nv64Vd.png"}</script></head>
<body class="bg-transparent pt-4">
<div class="container">
<a class="avatar-container float-left mx-4" href="https://blog.kmonsoor.com">
<div class="avatar animate">
<div class="side"><img class="img-fluid" src="/logo.png"/></div>
<div class="side back text-center pt-2 px-1 small">
                                comes with a beard
                            </div>
</div>
</a>
<h1>
<a class="text-dark text-decoration-none" href="https://blog.kmonsoor.com">I think ...</a>
<small class="text-secondary"><small></small></small>
</h1>
<nav class="navbar d-block navbar-expand-lg navbar-light bg-light shadow rounded-lg">
<a class="navbar-brand d-none" href="https://blog.kmonsoor.com" title="">I think ...</a>
<button aria-controls="plumage-navbar-collapse-1" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#plumage-navbar-collapse-1" data-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="plumage-navbar-collapse-1">
<ul class="navbar-nav mr-auto mt-2 mt-lg-0">
<li class="nav-item">
<a class="nav-link" href="/">
                                    Home
                                </a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://blog.kmonsoor.com/about/">
                                        About Me
                                    </a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://blog.kmonsoor.com/category/language/">
                                        Language
                                    </a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://blog.kmonsoor.com/category/others/">
                                        Others
                                    </a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://blog.kmonsoor.com/category/tech/">
                                        Tech
<span class="sr-only">(current)</span> </a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://blog.kmonsoor.com/category/thoughts/">
                                        Thoughts
                                    </a>
</li>
</ul>
</div>
</nav>
</div>
<div class="container mt-5">
<div class="row">
<div class="col-md-9">
<h1>
<a href="https://blog.kmonsoor.com/generate-er-diagram-from-sql-database/" rel="bookmark" title="Permalink to Generate ER diagram from a SQL-based database">Generate <span class="caps">ER</span> diagram from a <span class="caps">SQL</span>-based database</a>
</h1>
</div>
</div>
<div class="row">
<div class="col-md-9" id="content" role="main">
<p>When you are “study”-ing (for whatever reason) someone else’s database, and the database has more than 20 tables, you might be in trouble to understand what’s going where.</p>
<p>Now, imagine a database with 300+ tables. It’s like spaghetti, just not as enjoyable.</p>
<p>I faced a similar challenge recently with a database of 250+ tables. Yes, I felt like in a deep sh*t. And, I started looking for tools that can describe the tables, or at least a decent <span class="caps">ER</span> diagram. If anything more, better. And, preferably free.</p>
<p>Then, I found <a href="http://schemaspy.sourceforge.net/">SchemaSpy</a>, originally authored by <a href="https://sites.google.com/site/johncurrier/">John Currier</a>. It generates a complete in-depth <span class="caps">HTML</span>-based description (of course, including clickable <span class="caps">ER</span>-diagram) of the database, which you can then browse with your browser. This post is about its primary usage.</p>
<p>The output will be kind of like this:
<img alt="schemapy output sample" class="img-fluid border rounded shadow" src="https://i.imgur.com/K1yYBID.png"/></p>
<p>It is based on Java, but it can work its magic on most of the major database products. However, it would require an appropriate <span class="caps">JDBC</span> connector for that database.</p>
<p>Quote from the author:</p>
<blockquote class="blockquote border-left border-primary pl-3">
<p><code>SchemaSpy</code> uses <span class="caps">JDBC</span>’s database metadata extraction services to gather the majority of its information but has to make vendor-specific <span class="caps">SQL</span> queries to gather some information such as the <span class="caps">SQL</span> associated with a view and the details of check constraints.</p>
</blockquote>
<p>In this post, as an example, I have shown how to use it with PostgreSQL. But, it’s not the only one that’s supported. You can use it with any proper <span class="caps">RDBMS</span> system as long as it has a <span class="caps">JDBC</span>-connector.
 Now, to use it, you need to get these stuffs.</p>
<ul>
<li><strong>First of all</strong>, your system should have <strong>Java runtime</strong> properly installed. <a href="https://adoptopenjdk.net/">Download from here.</a></li>
<li><strong>SchemaSpy, which is a .jar file</strong>. <a href="https://sourceforge.net/projects/schemaspy/files/">Get it here</a>.
    At the time of writing, it was version 5.0.0.</li>
<li><strong><span class="caps">JDBC</span> connector to PostgreSQL</strong>. Make sure to match your PostgreSQL version. You can <a href="https://jdbc.postgresql.org/download.html">download it from here</a>.<br/>
    You can check your PostgreSQL version by executing: <code>SELECT version();</code> query on <strong><em>psql</em></strong> prompt.</li>
<li>Also, SchemaSpy depends on <strong>GarphViz</strong> to generate the <span class="caps">ER</span> diagrams, so you need to be installed it on your system. Get it from here.(<a href="http://www.graphviz.org/Download..php">http://www.graphviz.org/Download..php</a>)</li>
<li>And, of course, make sure the target database instance is running <span class="amp">&amp;</span> serving the database you are trying to visualize.</li>
</ul>
<p>Quoting from the author:</p>
<blockquote class="blockquote border-left border-primary pl-3">
<p>SchemaSpy uses the dot executable from <a href="http://www.graphviz.org/">Graphviz</a> to generate graphical representations of the table/view relationships. The visual representation of the connections is a fundamental feature of the tool.  </p>
<p>Graphviz is not required to view the output generated by SchemaSpy, but <strong>the dot program should be in your <span class="caps">PATH</span></strong> (not <span class="caps">CLASSPATH</span>) when running SchemaSpy, or none of the entity-relationship diagrams will be generated. Or, maybe <a href="http://schemaspy.sourceforge.net/#gvparam">use the <code>-gv</code></a> option).</p>
</blockquote>
<p>I kept the .jar files (both the <span class="caps">JDBC</span>-connector and the <code>SchemaSpy</code>) in my home folder for convenience.<br/>
Now, in my case, my <span class="caps">OS</span> is Linux, and the database is hosted locally; hence address is <code>127.0.0.1</code>, running <code>PostgreSQL-9.3</code> at port <code>5432</code>.
So, I run the command like this:</p>
<div class="highlight pygments-style-monokai rounded shadow-sm mb-3"><pre><span></span><code><span class="linenos" data-linenos="1 "></span> $ java -jar ./schemaSpy_5.0.0.jar -t pgsql -host 127.0.0.1:5432 -db your_database_name \
<span class="linenos" data-linenos="2 "></span>                                   -u your_DB_user_name -p your_password -s public \
<span class="linenos" data-linenos="3 "></span>                                   -dp ./postgresql-9.3-1102.jdbc3.jar \
<span class="linenos" data-linenos="4 "></span>                                   -o output_folder
</code></pre></div>
<p>It may take a little while, depending on the size of the schema of the database.<br/>
After that, you will find the output folder/directory named <code>output_folder</code>.<br/>
You’ll see some output when the magic is going on, similar to this below.</p>
<div class="highlight pygments-style-monokai rounded shadow-sm mb-3"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>Using database properties: [./schemaSpy_5.0.0.jar]/net/sourceforge/schemaspy/dbTypes/pgsql.properties
<span class="linenos" data-linenos="2 "></span>Gathering schema details....................(6sec)
<span class="linenos" data-linenos="3 "></span>Writing/graphing summary....................(2sec)
<span class="linenos" data-linenos="4 "></span>Writing/diagramming detail..................(31sec)
<span class="linenos" data-linenos="5 "></span>Wrote relationship details of 113 tables/views to directory 'output' in 41 seconds.
<span class="linenos" data-linenos="6 "></span>
<span class="linenos" data-linenos="7 "></span>View the results by opening output_folder/index.html
</code></pre></div>
<p>Now, all the generated files are in the <code>output_folder</code>.
Start your journey by starting from the <code>index.html</code> in the output folder. Open it by using any browser.</p>
<p>Good luck. :)</p>
<hr/>
<p>If you find this post helpful, you can show your support <a href="https://www.patreon.com/kmonsoor">through Patreon</a> or by <a href="https://ko-fi.com/kmonsoor">buying me a coffee</a>. <em>Thanks!</em></p>
<div class="commentbox"></div>
<script src="https://unpkg.com/commentbox.io/dist/commentBox.min.js"></script>
<script>commentBox('5722781509484544-proj')</script>
</div>
<div class="col-md-3">
<div class="card bg-light text-dark">
<ul class="list-group list-group-flush">
<li class="list-group-item">
<abbr title="2014-12-18T00:00:00+06:00"><i class="fas fa-calendar"></i> 2014-12-18</abbr>
</li>
<li class="list-group-item">
<a class="badge badge-info" data-toggle="tooltip" href="https://blog.kmonsoor.com/category/tech/" rel="tag" title="25 articles in this category">Tech</a>
<a class="badge badge-secondary" data-toggle="tooltip" href="/tag/programming/" title="3 articles with this tag">programming</a>
<a class="badge badge-secondary" data-toggle="tooltip" href="/tag/database/" title="2 articles with this tag">database</a>
<a class="badge badge-secondary" data-toggle="tooltip" href="/tag/dbms/" title="1 article with this tag">dbms</a>
<a class="badge badge-secondary" data-toggle="tooltip" href="/tag/er-diagram/" title="1 article with this tag">ER-diagram</a>
<a class="badge badge-secondary" data-toggle="tooltip" href="/tag/graphviz/" title="1 article with this tag">graphviz</a>
<a class="badge badge-secondary" data-toggle="tooltip" href="/tag/java/" title="1 article with this tag">java</a>
<a class="badge badge-secondary" data-toggle="tooltip" href="/tag/postgresql/" title="1 article with this tag">postgresql</a>
<a class="badge badge-secondary" data-toggle="tooltip" href="/tag/rdbms/" title="1 article with this tag">RDBMS</a>
<a class="badge badge-secondary" data-toggle="tooltip" href="/tag/schema/" title="1 article with this tag">schema</a>
<a class="badge badge-secondary" data-toggle="tooltip" href="/tag/schemaspy/" title="1 article with this tag">schemaspy</a>
<a class="badge badge-secondary" data-toggle="tooltip" href="/tag/sql/" title="1 article with this tag">sql</a>
<a class="badge badge-secondary" data-toggle="tooltip" href="/tag/visualization/" title="1 article with this tag">visualization</a>
</li>
<li class="list-group-item">
<p>Found a typo? Fix it now:</p>
<a class="btn btn-info btn-block" href="https://github.com/kmonsoor/blog.kmonsoor.com/edit/live/content/articles/generate-er-diagram-from-sql-database.md"><i class="fas fa-edit fa-fw"></i> Edit article on GitHub</a>
</li>
<li class="list-group-item">
<nav class="nav nav-pills nav-fill">
<a class="nav-link btn btn-outline-primary border-0" href="https://blog.kmonsoor.com/python-how-to-generate-all-possible-combinations-or-permutations/" rel="prev" title="Python - How to Create All Possible Combinations (a.k.a Permutations)">
<span aria-hidden="true">←</span> Older
                        </a>
<a class="nav-link btn btn-outline-primary border-0" href="https://blog.kmonsoor.com/seven-deadly-sins-in-python-code/" rel="next" title="Se7en Deadly Sins to Do in Python code">
                            Newer <span aria-hidden="true">→</span>
</a>
</nav>
</li>
</ul>
</div>
</div>
</div>
</div>
<footer class="container-fluid mt-5 p-4 small">
<div class="row mx-5">
<div class="col-md-2">
<h6>Social</h6>
<ul class="list-unstyled">
<li><a href="https://twitter.com/kmonsoor">
<i class="fab fa-twitter fa-fw"></i>
    Twitter
</a></li>
</ul>
</div>
<div class="col-md-2">
<h6>Professional</h6>
<ul class="list-unstyled">
<li><a href="https://stackoverflow.com/users/617185/kmonsoor">
<i class="fab fa-stack-overflow fa-fw"></i>
    StackOverflow
</a></li>
<li><a href="https://linkedin.com/in/kmonsoor">
<i class="fab fa-linkedin fa-fw"></i>
    LinkedIn
</a></li>
<li><a href="https://github.com/kmonsoor/">
<i class="fab fa-github fa-fw"></i>
    Github
</a></li>
</ul>
</div>
<div class="col-md-2">
<h6>Browse content by</h6>
<ul class="list-unstyled">
<li><a href="https://blog.kmonsoor.com/categories/index.html"><i class="fas fa-th fa-fw"></i> Categories</a></li>
<li><a href="https://blog.kmonsoor.com/archives/index.html"><i class="far fa-calendar-alt fa-fw"></i> Dates</a></li>
<li><a href="https://blog.kmonsoor.com/tags/index.html"><i class="fas fa-tags fa-fw"></i> Tags</a></li>
</ul>
</div>
<div class="col-md-2 text-muted">
<h6>Copyright notice</h6>
<p class="small">
                        © Copyright
                        2010-2021
                        Khaled Monsoor.
                    </p>
</div>
<div class="col-md-2 text-muted">
<h6>Disclaimer</h6>
<p class="small">
                            All opinions expressed in this site are my own personal opinions               and are not endorsed by, nor do they represent the opinions of my               previous, current and future employers or any of its affiliates,               partners or customers.
                    </p>
</div>
<div class="col-md-2">
<h6>Feeds</h6>
<ul class="list-unstyled small">
<li>
<a href="https://blog.kmonsoor.com/feed/atom/index.html">
<i class="fas fa-atom fa-fw"></i> Latest posts (Atom)
                                    </a>
</li>
<li>
<a href="https://blog.kmonsoor.com/feed/index.html">
<i class="fas fa-rss fa-fw"></i> Latest posts (RSS)
                                    </a>
</li>
<li>
<a href="https://blog.kmonsoor.com/category/tech/feed/atom/index.html">
<i class="fas fa-atom fa-fw"></i> Category: Tech (Atom)
                                    </a>
</li>
<li>
<a href="https://blog.kmonsoor.com/category/tech/feed/index.html">
<i class="fas fa-rss fa-fw"></i> Category: Tech (RSS)
                                    </a>
</li>
</ul>
</div>
</div>
<div class="row mt-3">
<div class="offset-3 col-6 small text-muted text-center">
                    Site generated by <a class="text-dark" href="https://getpelican.com">Pelican</a>.<br/>
<a class="text-dark" href="https://github.com/kdeldycke/plumage">Plumage</a>
                    theme by <a class="text-dark" href="https://kevin.deldycke.com">Kevin Deldycke</a>.
                </div>
<div class="col-3 text-right d-flex flex-column">
<a class="mt-auto" href="#"><i class="fas fa-arrow-up"></i> Back to top</a>
</div>
</div>
</footer>
</body>
</html>