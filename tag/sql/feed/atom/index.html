<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom"><title>Khaled Monsoor :: Blog - sql</title><link href="https://blog.kmonsoor.com/" rel="alternate"><link href="https://blog.kmonsoor.com/tag/sql/feed/atom/index.html" rel="self"><id>https://blog.kmonsoor.com/</id><updated>2016-02-07T00:00:00+06:00</updated><entry><title>Generate ER diagram from a SQL-based database</title><link href="https://blog.kmonsoor.com/generate-er-diagram-from-sql-database/" rel="alternate"><published>2014-12-18T00:00:00+06:00</published><updated>2016-02-07T00:00:00+06:00</updated><author><name>Khaled Monsoor</name></author><id>tag:blog.kmonsoor.com,2014-12-18:/generate-er-diagram-from-sql-database/</id><summary type="html">&lt;p&gt;When you are "study"-ing someone else's database with 300+ tables. It's like spaghetti, but not enjoyable. Rather, horrific.&lt;/p&gt;</summary><content type="html">&lt;p&gt;When you are "study"-ing (for whatever reason) someone else's database, and the database has more than 20 tables, you are in trouble to understand what goes where.&lt;/p&gt; &lt;p&gt;Now, imagine a database with 300+ tables. It's like spaghetti, but not enjoyable. Rather, horrific.&lt;/p&gt; &lt;p&gt;I faced a similar challenge recently with a database of 250+ tables. Yes, i felt like in a deep sh*t. And, started looking for tools which can describe the tables in at least decent ER-diagram. If anything more, better. And, obviously free as my company is not paying.&lt;/p&gt; &lt;p&gt;Then, I found &lt;a href="http://schemaspy.sourceforge.net/"&gt;SchemaSpy&lt;/a&gt;, originally authored by &lt;a href="https://sites.google.com/site/johncurrier/"&gt;John Currier&lt;/a&gt;. It generate a complete in-depth HTML-based description (of course, including clickable ER-diagram) of the database, which you can then browse with your browser. This post is on it's basic usage.&lt;/p&gt; &lt;p&gt;The output will be kind of like this: &lt;img alt="schemapy output sample" src="https://i.imgur.com/K1yYBID.png"&gt;&lt;/p&gt; &lt;p&gt;It is based on Java technologies, but can work its magic on most of the major database technologies. But, you would need a appropriate JDBC connector for that database.&lt;/p&gt; &lt;p&gt;Quote from the author:&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;SchemaSpy uses JDBC's database metadata extraction services to gather the majority of its information, but has to make vendor-specific SQL queries to gather some information such as the SQL associated with a view and the details of check constraints.&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;In this post, as example, i have shown to use it with PostgreSQL. But, it's not the only one supported. You can use ot with any proper RDBMS system as long as it has a JDBC-connector. Now, to use it, you need these staffs.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;strong&gt;First of all&lt;/strong&gt;, your system should have &lt;strong&gt;Java runtime&lt;/strong&gt; properly installed. &lt;a href="https://java.com/en/download/manual.jsp"&gt;Download from here.&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;strong&gt;SchemaSpy, which is a .jar file&lt;/strong&gt;. &lt;a href="https://sourceforge.net/projects/schemaspy/files/"&gt;Get it here&lt;/a&gt;. At the time of writing, it was version 5.0.0.&lt;/li&gt; &lt;li&gt;&lt;strong&gt;JDBC connector to PostgreSQL*&lt;em&gt;. Make sure to match your PostgreSQL version. You can &lt;a href="https://jdbc.postgresql.org/download.html"&gt;download it from here&lt;/a&gt;.&lt;br&gt; You can check your PostgreSQL version by executing: &lt;code&gt;SELECT version();&lt;/code&gt; query on &lt;/em&gt;&lt;/strong&gt;psql*** prompt.&lt;/li&gt; &lt;li&gt;Also, SchemaSpy depends on &lt;strong&gt;GarphViz&lt;/strong&gt; to generate the ER-diagrams, so you need to be installed it on your system. Get it from here.(http://www.graphviz.org/Download..php)&lt;/li&gt; &lt;li&gt;And, of course make sure PostgreSQL instance running &amp;amp; serving the database you are trying to visualize.&lt;/li&gt; &lt;/ul&gt; &lt;p&gt;Quoting from the author:&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;SchemaSpy uses the dot executable from &lt;a href="http://www.graphviz.org/"&gt;Graphviz&lt;/a&gt; to generate graphical representations of the table/view relationships. This was initially added for people who see things visually. Now the graphical representation of relationships is a fundamental feature of the tool. &lt;/p&gt; &lt;p&gt;Graphviz is not required to view the output generated by SchemaSpy, but &lt;strong&gt;the dot program should be in your PATH&lt;/strong&gt; (not CLASSPATH) when running SchemaSpy or none of the entity relationship diagrams will be generated (or use the &lt;a href="http://schemaspy.sourceforge.net/#gvparam"&gt;&lt;code&gt;-gv&lt;/code&gt;&lt;/a&gt; option).&lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt;For convenience, I kept the .jar files (JDBC-connector, and SchemaSpy) in my home folder.&lt;br&gt; Now, in my case, my OS is Linux, and database is hosted locally, hence address is &lt;code&gt;127.0.0.1&lt;/code&gt;, running &lt;code&gt;PostgreSQL-9.3&lt;/code&gt; at port &lt;code&gt;5432&lt;/code&gt;. So, i run the command like this:&lt;/p&gt; &lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; $ java -jar ./schemaSpy_5.0.0.jar -t pgsql -host 127.0.0.1:5432 -db your_database_name \ -u your_DB_user_name -p your_password -s public \ -dp ./postgresql-9.3-1102.jdbc3.jar \ -o output_folder &lt;/pre&gt;&lt;/div&gt; &lt;p&gt;It may take a little while, depending on the size of the schema of the database.&lt;br&gt; After that, you will find the output folder/directory named &lt;code&gt;output_folder&lt;/code&gt;.&lt;br&gt; You'll see some output when the magic is going on, similar to this below.&lt;/p&gt; &lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Using database properties: [./schemaSpy_5.0.0.jar]/net/sourceforge/schemaspy/dbTypes/pgsql.properties Gathering schema details....................(6sec) Writing/graphing summary....................(2sec) Writing/diagramming detail..................(31sec) Wrote relationship details of 113 tables/views to directory &amp;#39;output&amp;#39; in 41 seconds. View the results by opening output_folder/index.html &lt;/pre&gt;&lt;/div&gt; &lt;p&gt;Now, all the generated files are in the &lt;code&gt;output_folder&lt;/code&gt;. Start your journey by starting from the &lt;code&gt;index.html&lt;/code&gt; in the output folder. Open it by using any browser you want.&lt;/p&gt; &lt;p&gt;Good luck. :)&lt;/p&gt; &lt;hr&gt; &lt;h2&gt;You may find these interesting&lt;/h2&gt; &lt;ul&gt; &lt;li&gt;&lt;a href="https://blog.kmonsoor.com/ubuntu-update-apt-get-server-to-use-fastest-mirror/?utm_source=related_footer&amp;amp;utm_keyword=linux"&gt;Ubuntu - Update APT-GET Server to Use Fastest Mirror&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href="https://blog.kmonsoor.com/open-source-as-if-you-gonna-die-tonight/?utm_source=related_footer&amp;amp;utm_keyword=coding"&gt;Open Source as-if You Gonna Die Tonight&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href="https://blog.kmonsoor.com/pelican-how-to-make-seo-friendly/?utm_source=related_footer&amp;amp;utm_keyword=python"&gt;Pelican Static sites - SEO Optimization&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt;</content><category term="Tech"></category><category term="sql"></category><category term="db"></category><category term="dbms"></category><category term="diagram"></category><category term="ER-diagram"></category><category term="graphviz"></category><category term="java"></category><category term="postgresql"></category><category term="programming"></category><category term="rdbms"></category><category term="schema"></category><category term="schemaspy"></category><category term="visualization"></category></entry></feed>