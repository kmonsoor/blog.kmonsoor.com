<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>I think ... - postgresql</title><link href="https://blog.kmonsoor.com/" rel="alternate"></link><link href="https://blog.kmonsoor.com/tag/postgresql/feed/atom/index.html" rel="self"></link><id>https://blog.kmonsoor.com/</id><updated>2014-12-18T00:00:00+06:00</updated><entry><title>Generate ER diagram from a SQL-based database</title><link href="https://blog.kmonsoor.com/generate-er-diagram-from-sql-database/" rel="alternate"></link><published>2014-12-18T00:00:00+06:00</published><updated>2014-12-18T00:00:00+06:00</updated><author><name>Khaled Monsoor</name></author><id>tag:blog.kmonsoor.com,2014-12-18:/generate-er-diagram-from-sql-database/</id><summary type="html">&lt;p&gt;When you are &amp;ldquo;study&amp;rdquo;-ing someone else&amp;rsquo;s database with 300+ tables. It&amp;rsquo;s like spaghetti, but not enjoyable. Rather,&amp;nbsp;horrific.&lt;/p&gt;</summary><content type="html">&lt;p&gt;When you are &amp;ldquo;study&amp;rdquo;-ing (for whatever reason) someone else&amp;rsquo;s database, and the database has more than 20 tables, you might be in trouble to understand what&amp;rsquo;s going&amp;nbsp;where.&lt;/p&gt;
&lt;p&gt;Now, imagine a database with 300+ tables. It&amp;rsquo;s like spaghetti, just not as&amp;nbsp;enjoyable.&lt;/p&gt;
&lt;p&gt;I faced a similar challenge recently with a database of 250+ tables. Yes, I felt like in a deep sh*t. And, I started looking for tools that can describe the tables, or at least a decent &lt;span class="caps"&gt;ER&lt;/span&gt; diagram. If anything more, better. And, preferably&amp;nbsp;free.&lt;/p&gt;
&lt;p&gt;Then, I found &lt;a href="http://schemaspy.sourceforge.net/"&gt;SchemaSpy&lt;/a&gt;, originally authored by &lt;a href="https://sites.google.com/site/johncurrier/"&gt;John Currier&lt;/a&gt;. It generates a complete in-depth &lt;span class="caps"&gt;HTML&lt;/span&gt;-based description (of course, including clickable &lt;span class="caps"&gt;ER&lt;/span&gt;-diagram) of the database, which you can then browse with your browser. This post is about its primary&amp;nbsp;usage.&lt;/p&gt;
&lt;p&gt;The output will be kind of like this:
&lt;img alt="schemapy output sample" src="https://i.imgur.com/K1yYBID.png"&gt;&lt;/p&gt;
&lt;p&gt;It is based on Java, but it can work its magic on most of the major database products. However, it would require an appropriate &lt;span class="caps"&gt;JDBC&lt;/span&gt; connector for that&amp;nbsp;database.&lt;/p&gt;
&lt;p&gt;Quote from the&amp;nbsp;author:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;SchemaSpy&lt;/code&gt; uses &lt;span class="caps"&gt;JDBC&lt;/span&gt;&amp;rsquo;s database metadata extraction services to gather the majority of its information but has to make vendor-specific &lt;span class="caps"&gt;SQL&lt;/span&gt; queries to gather some information such as the &lt;span class="caps"&gt;SQL&lt;/span&gt; associated with a view and the details of check&amp;nbsp;constraints.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In this post, as an example, I have shown how to use it with PostgreSQL. But, it&amp;rsquo;s not the only one that&amp;rsquo;s supported. You can use it with any proper &lt;span class="caps"&gt;RDBMS&lt;/span&gt; system as long as it has a &lt;span class="caps"&gt;JDBC&lt;/span&gt;-connector.
 Now, to use it, you need to get these&amp;nbsp;stuffs.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;First of all&lt;/strong&gt;, your system should have &lt;strong&gt;Java runtime&lt;/strong&gt; properly installed. &lt;a href="https://adoptopenjdk.net/"&gt;Download from&amp;nbsp;here.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SchemaSpy, which is a .jar file&lt;/strong&gt;. &lt;a href="https://sourceforge.net/projects/schemaspy/files/"&gt;Get it here&lt;/a&gt;.
    At the time of writing, it was version&amp;nbsp;5.0.0.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;span class="caps"&gt;JDBC&lt;/span&gt; connector to PostgreSQL&lt;/strong&gt;. Make sure to match your PostgreSQL version. You can &lt;a href="https://jdbc.postgresql.org/download.html"&gt;download it from here&lt;/a&gt;.&lt;br&gt;
    You can check your PostgreSQL version by executing: &lt;code&gt;SELECT version();&lt;/code&gt; query on &lt;strong&gt;&lt;em&gt;psql&lt;/em&gt;&lt;/strong&gt;&amp;nbsp;prompt.&lt;/li&gt;
&lt;li&gt;Also, SchemaSpy depends on &lt;strong&gt;GarphViz&lt;/strong&gt; to generate the &lt;span class="caps"&gt;ER&lt;/span&gt; diagrams, so you need to be installed it on your system. Get it from here.(&lt;a href="http://www.graphviz.org/Download..php"&gt;http://www.graphviz.org/Download..php&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;And, of course, make sure the target database instance is running &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; serving the database you are trying to&amp;nbsp;visualize.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Quoting from the&amp;nbsp;author:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;SchemaSpy uses the dot executable from &lt;a href="http://www.graphviz.org/"&gt;Graphviz&lt;/a&gt; to generate graphical representations of the table/view relationships. The visual representation of the connections is a fundamental feature of the&amp;nbsp;tool.  &lt;/p&gt;
&lt;p&gt;Graphviz is not required to view the output generated by SchemaSpy, but &lt;strong&gt;the dot program should be in your &lt;span class="caps"&gt;PATH&lt;/span&gt;&lt;/strong&gt; (not &lt;span class="caps"&gt;CLASSPATH&lt;/span&gt;) when running SchemaSpy, or none of the entity-relationship diagrams will be generated. Or, maybe &lt;a href="http://schemaspy.sourceforge.net/#gvparam"&gt;use the &lt;code&gt;-gv&lt;/code&gt;&lt;/a&gt;&amp;nbsp;option).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I kept the .jar files (both the &lt;span class="caps"&gt;JDBC&lt;/span&gt;-connector and the &lt;code&gt;SchemaSpy&lt;/code&gt;) in my home folder for convenience.&lt;br&gt;
Now, in my case, my &lt;span class="caps"&gt;OS&lt;/span&gt; is Linux, and the database is hosted locally; hence address is &lt;code&gt;127.0.0.1&lt;/code&gt;, running &lt;code&gt;PostgreSQL-9.3&lt;/code&gt; at port &lt;code&gt;5432&lt;/code&gt;.
So, I run the command like&amp;nbsp;this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="linenos" data-linenos="1 "&gt;&lt;/span&gt; $ java -jar ./schemaSpy_5.0.0.jar -t pgsql -host 127.0.0.1:5432 -db your_database_name \
&lt;span class="linenos" data-linenos="2 "&gt;&lt;/span&gt;                                   -u your_DB_user_name -p your_password -s public \
&lt;span class="linenos" data-linenos="3 "&gt;&lt;/span&gt;                                   -dp ./postgresql-9.3-1102.jdbc3.jar \
&lt;span class="linenos" data-linenos="4 "&gt;&lt;/span&gt;                                   -o output_folder
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It may take a little while, depending on the size of the schema of the database.&lt;br&gt;
After that, you will find the output folder/directory named &lt;code&gt;output_folder&lt;/code&gt;.&lt;br&gt;
You&amp;rsquo;ll see some output when the magic is going on, similar to this&amp;nbsp;below.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="linenos" data-linenos="1 "&gt;&lt;/span&gt;Using database properties: [./schemaSpy_5.0.0.jar]/net/sourceforge/schemaspy/dbTypes/pgsql.properties
&lt;span class="linenos" data-linenos="2 "&gt;&lt;/span&gt;Gathering schema details....................(6sec)
&lt;span class="linenos" data-linenos="3 "&gt;&lt;/span&gt;Writing/graphing summary....................(2sec)
&lt;span class="linenos" data-linenos="4 "&gt;&lt;/span&gt;Writing/diagramming detail..................(31sec)
&lt;span class="linenos" data-linenos="5 "&gt;&lt;/span&gt;Wrote relationship details of 113 tables/views to directory &amp;#39;output&amp;#39; in 41 seconds.
&lt;span class="linenos" data-linenos="6 "&gt;&lt;/span&gt;
&lt;span class="linenos" data-linenos="7 "&gt;&lt;/span&gt;View the results by opening output_folder/index.html
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, all the generated files are in the &lt;code&gt;output_folder&lt;/code&gt;.
Start your journey by starting from the &lt;code&gt;index.html&lt;/code&gt; in the output folder. Open it by using any&amp;nbsp;browser.&lt;/p&gt;
&lt;p&gt;Good luck.&amp;nbsp;:)&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;If you find this post helpful, you can show your support &lt;a href="https://www.patreon.com/kmonsoor"&gt;through Patreon&lt;/a&gt; or by &lt;a href="https://ko-fi.com/kmonsoor"&gt;buying me a coffee&lt;/a&gt;. &lt;em&gt;Thanks!&lt;/em&gt;&lt;/p&gt;</content><category term="Tech"></category><category term="database"></category><category term="sql"></category><category term="dbms"></category><category term="ER-diagram"></category><category term="graphviz"></category><category term="java"></category><category term="postgresql"></category><category term="programming"></category><category term="RDBMS"></category><category term="schema"></category><category term="schemaspy"></category><category term="visualization"></category></entry></feed>